# Copyright (c) 2025 Vladimir Gusarov
# Licensed under the MIT License.
#
# Downloads all resource template files from repository.
#
# This template ensures that all necessary files are available for the pipeline and checked out from the source control.
#
parameters:
  # The name of the repository resource to be checked out. Use `self` for the current repository.
  - name: repositoryResourceName
    type: string
    default: 'almguru-templates'

  - name: repositoryLocalPath
    type: string
    default: 'almguru-templates'

steps:
  - checkout: ${{ parameters.repositoryResourceName }}
    path: ${{ parameters.repositoryLocalPath }}
    displayName: 'Checkout template resources'

  - pwsh: |
      $separator = [System.IO.Path]::DirectorySeparatorChar
      Write-Host "##vso[task.setvariable variable=almguruTemplateFilesPath]`$(Pipeline.Workspace)$separator${{ parameters.repositoryLocalPath }}"
    displayName: 'Set template resources path variable'